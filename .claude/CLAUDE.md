以下のような追記を提案します：

## CLAUDE.md
## Conversation Guidelines

- 常に日本語で会話する

## Development Philosophy

### Test-Driven Development (TDD)

- 原則としてテスト駆動開発（TDD）で進める
- 期待される入出力に基づき、まずテストを作成する
- 実装コードは書かず、テストのみを用意する
- テストを実行し、失敗を確認する
- テストが正しいことを確認できた段階でコミットする
- その後、テストをパスさせる実装を進める
- 実装中はテストを変更せず、コードを修正し続ける
- すべてのテストが通過するまで繰り返す

### Code Review and Implementation Guidance

- コードの指針や修正案を示す際は、具体的な実装コードではなく設計方針や改善提案を提示する
- 実装はユーザーが行うものとし、Claude は技術的な方向性とベストプラクティスを示す役割に徹する
- 必要に応じて疑似コードやアーキテクチャ図での説明は行うが、完全な実装コードは避ける
- 学習効果を重視し、ユーザー自身の思考と実装を促すアプローチを取る

### 自動品質チェック

コード編集後は以下の自動チェックが実行されます（settings.local.jsonで設定済み）：

1. **フォーマット**: Prettierによる自動整形（JS/TS/TSX/JSX）
2. **フロントエンドリント**: ESLintチェック（frontend配下のファイル編集時）
3. **バックエンドリント**: RuboCopチェック（backend配下のRubyファイル編集時）
4. **テスト実行**: 変更されたspecファイルの自動テスト（backend配下）

手動での実行も推奨：
```bash
# フロントエンド
docker-compose exec frontend npm run lint
docker-compose exec frontend npm run type-check

# バックエンド
docker-compose exec backend bundle exec rubocop
docker-compose exec backend bundle exec rspec
```

## コードレビュー観点

### 1. セキュリティ
- [ ] SQLインジェクション対策（パラメータ化クエリの使用）
- [ ] XSS対策（適切なエスケープ処理）
- [ ] CSRF対策（トークンの検証）
- [ ] 認証・認可の適切な実装
- [ ] 機密情報のハードコーディング禁止
- [ ] 入力値検証とサニタイゼーション
- [ ] セキュアなセッション管理

### 2. コード品質
- [ ] 単一責任原則（SRP）の遵守
- [ ] DRY原則（重複コードの排除）
- [ ] YAGNI原則（不要な実装を避ける）
- [ ] 適切な命名規則（変数名、関数名、クラス名）
- [ ] マジックナンバーの定数化
- [ ] 複雑度の管理（循環的複雑度を低く保つ）
- [ ] 適切なコメントとドキュメント

### 3. パフォーマンス
- [ ] N+1問題の回避（Rails）
- [ ] 不要な再レンダリングの防止（React）
- [ ] 適切なインデックスの使用（データベース）
- [ ] キャッシュの活用
- [ ] 非同期処理の適切な実装
- [ ] メモリリークの防止
- [ ] バンドルサイズの最適化（フロントエンド）

### 4. テスタビリティ
- [ ] テストカバレッジ80%以上
- [ ] ユニットテストの存在
- [ ] モックとスタブの適切な使用
- [ ] エッジケースのテスト
- [ ] エラーケースのテスト
- [ ] 統合テストの実装
- [ ] テストの独立性と再現性

### 5. 保守性
- [ ] コードの可読性
- [ ] 適切なモジュール分割
- [ ] 依存関係の明確化
- [ ] 設定の外部化（環境変数）
- [ ] ログ出力の適切な実装
- [ ] エラーハンドリングの一貫性
- [ ] バージョニング戦略

### 6. Rails固有の観点
- [ ] Strong Parametersの使用
- [ ] Active Recordの適切な使用
- [ ] マイグレーションの可逆性
- [ ] scopeの活用
- [ ] concernsの適切な使用
- [ ] サービスオブジェクトパターンの活用
- [ ] フォームオブジェクトの活用

### 7. React/Next.js固有の観点
- [ ] コンポーネントの適切な分割
- [ ] propsの型定義（TypeScript）
- [ ] カスタムフックの活用
- [ ] 状態管理の適切性
- [ ] Server ComponentsとClient Componentsの使い分け
- [ ] 画像最適化（next/image）
- [ ] SEO対策（メタタグ、構造化データ）

### 8. API設計
- [ ] RESTful原則の遵守
- [ ] 適切なHTTPステータスコードの使用
- [ ] レスポンスフォーマットの一貫性
- [ ] エラーレスポンスの標準化
- [ ] ページネーションの実装
- [ ] バージョニング戦略
- [ ] CORS設定の適切性

### 9. データベース設計
- [ ] 正規化の適切なレベル
- [ ] インデックスの最適化
- [ ] 外部キー制約の設定
- [ ] トランザクションの適切な使用
- [ ] データ型の適切な選択
- [ ] NULL許容の適切な設定
- [ ] デフォルト値の設定

### 10. 開発プロセス
- [ ] コミットメッセージの明確性
- [ ] PRの適切なサイズ
- [ ] ブランチ戦略の遵守
- [ ] CI/CDパイプラインの通過
- [ ] ドキュメントの更新
- [ ] 破壊的変更の通知
- [ ] デプロイ手順の明確化
